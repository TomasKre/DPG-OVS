<!DOCTYPE html>
<html>
<head>
  <title>Online Voting System</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    function submitVote() {
      var option = $('input[name=option]:checked').val();
      $.post('http://localhost:3000/vote', { option: option }, function (response) {
        alert(response);
      });
    }
    function getResults() {
      $.get('http://localhost:3000/results', function (response) {
        $('#results').text(response);
      });
    }
    function checkToken() {
      const tokenInput = document.getElementById('tokenInput').value;
      $.get('http://localhost:3000/tokens', { token: tokenInput }, function (response) {
        $('#token').text(response);
      });
      const token = document.getElementById('token').value;
      if (token == true) {
        const login = document.getElementById('login');
        login.style = "display: none;";
        const vote = document.getElementById('vote');
        vote.style = "display: block;";
      } else { window.alert("Token is not valid.") }
    }
  </script>
</head>
<body>
  <h1>Online Voting System</h1>
  <div id="login">
    <h1>Login</h1>
    <form>
      <div id="token" , style="display: none;"></div>
      <label for="token">Token:</label>
      <input type="text" id="tokenInput" name="token"><br><br>
      <input type="button" value="Login" onclick="checkToken()">
    </form>
  </div>
  <div id="vote" , style="display: none;">
    <h2>Options:</h2>
    <form>
      <input type="radio" name="option" value="cucumber">Okurka<br>
      <input type="radio" name="option" value="cactus">Kaktus<br>
      <input type="radio" name="option" value="idk">Já ňevjém uš<br>
      <input type="button" value="Submit" onclick="submitVote()">
    </form>
    <br>
    <input type="button" value="See Results" onclick="getResults()">
    <div id="results"></div>
  </div>
</body>
</html>